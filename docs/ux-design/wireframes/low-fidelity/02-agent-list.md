# Agent 列表頁 - Low-Fidelity Wireframe

**版本**: 1.0.0
**日期**: 2025-10-29
**狀態**: ✅ 已完成
**優先級**: P0

[◀ 上一個: Dashboard](./01-dashboard.md) | [返回索引](./README.md) | [下一個: Agent 創建 ▶](./03-agent-create.md)

---

## 1. 頁面概覽

### 用途和目標

Agent 列表頁是用戶管理所有 Agents 的中心樞紐，提供：
- **全局視圖**: 查看所有創建的 Agents
- **快速篩選**: 按狀態、標籤、時間篩選
- **批量管理**: 啟動、停止、刪除 Agents
- **快速訪問**: 測試、配置、查看詳情

### 主要用戶

| Persona | 使用頻率 | 關注重點 |
|---------|---------|---------|
| **Alex（開發者）** | 每天多次 | 快速找到 Agent、測試、查看狀態 |
| **Sarah（分析師）** | 每週數次 | 找到可用的分析 Agent、啟動任務 |
| **David（管理員）** | 每週 1-2 次 | 查看所有 Agents、資源使用、批量操作 |

### 成功指標

- ✅ 用戶可在 **5 秒內** 找到目標 Agent
- ✅ 篩選和搜索響應時間 **<300ms**
- ✅ 卡片視圖可快速識別 Agent 狀態
- ✅ 支持 **鍵盤快捷鍵** 提升效率

---

## 2. 佈局結構（Desktop - 1920x1080）

### 2.1 完整佈局（卡片視圖）

```
╔═══════════════════════════════════════════════════════════════════════════════════════════════════════╗
║  🏠 Semantic Kernel          🔍 Search (Cmd+K)              🔔(3)  👤Alex Chen  ⚙️  ❓               ║
╠═══════════════════════════════════════════════════════════════════════════════════════════════════════╣
║ ┌─────────────┐ ┌─────────────────────────────────────────────────────────────────────────────────┐  ║
║ │ 🏠 首頁     │ │                                                                                 │  ║
║ │ 🤖 Agents   │ │   Level 1: 頁面標題 + 主要操作                                                  │  ║
║ │ 💬 對話     │ │   ═══════════════════════════════════════════════════════════════════════      │  ║
║ │ 🧠 知識庫   │ │                                                                                 │  ║
║ │ 🔬 代碼執行 │ │   【Agents 管理】                                          [ + 創建 Agent ]     │  ║
║ │ 📊 SQL查詢  │ │   管理您的 AI Agents，共 23 個 Agents                                          │  ║
║ │ 🔄 工作流   │ │                                                                                 │  ║
║ │ 👤 Persona  │ │   ─────────────────────────────────────────────────────────────────────────   │  ║
║ │ ─────────   │ │                                                                                 │  ║
║ │ 📈 Analytics│ │   Level 2: 搜索與篩選工具                                                       │  ║
║ │ ⚙️ Settings │ │   ═══════════════════════════════════════════════════════════════════════      │  ║
║ └─────────────┘ │                                                                                 │  ║
║                 │   🔍 [_____________搜索 Agent 名稱或描述..._____________]  [高級篩選 ▼]         │  ║
║   (200px)       │                                                                                 │  ║
║                 │   狀態: ⦿ 全部 (23)   ○ 運行中 (8)   ○ 已停止 (15)                              │  ║
║                 │                                                                                 │  ║
║                 │   視圖: [⊞ 卡片]  [☰ 列表]          排序: [最近使用 ▼]       23 個結果         │  ║
║                 │                                                                                 │  ║
║                 │   ─────────────────────────────────────────────────────────────────────────   │  ║
║                 │                                                                                 │  ║
║                 │   Level 3: Agent 列表（卡片視圖 - 3 列佈局）                                    │  ║
║                 │   ═══════════════════════════════════════════════════════════════════════      │  ║
║                 │                                                                                 │  ║
║                 │   ┌────────────────────┐  ┌────────────────────┐  ┌────────────────────┐      │  ║
║                 │   │ 🤖 GPT-4 客服助手  │  │ 🤖 數據分析助手    │  │ 🤖 Code Reviewer   │      │  ║
║                 │   │ 🟢 運行中          │  │ ⚪ 已停止          │  │ 🟢 運行中          │      │  ║
║                 │   │ ──────────────────│  │ ──────────────────│  │ ──────────────────│      │  ║
║                 │   │ 提供智能客服支援， │  │ 協助業務人員進行數 │  │ 自動審查代碼質量， │      │  ║
║                 │   │ 解答產品和訂單問題 │  │ 據分析和報表生成   │  │ 提供改進建議       │      │  ║
║                 │   │ ──────────────────│  │ ──────────────────│  │ ──────────────────│      │  ║
║                 │   │ 📊 125 次調用      │  │ 📊 89 次調用       │  │ 📊 234 次調用      │      │  ║
║                 │   │ ⏱️ 1.2s 平均響應   │  │ ⏱️ 2.1s 平均響應   │  │ ⏱️ 3.5s 平均響應   │      │  ║
║                 │   │ 🏷️ #客服 #GPT-4   │  │ 🏷️ #分析 #Python  │  │ 🏷️ #開發 #審查    │      │  ║
║                 │   │ ──────────────────│  │ ──────────────────│  │ ──────────────────│      │  ║
║                 │   │ [⏸ 停止] [🧪 測試]│  │ [▶ 啟動] [🧪 測試]│  │ [⏸ 停止] [🧪 測試]│      │  ║
║                 │   │ [⚙️ 配置] [⋮ 更多] │  │ [⚙️ 配置] [⋮ 更多]│  │ [⚙️ 配置] [⋮ 更多]│      │  ║
║                 │   └────────────────────┘  └────────────────────┘  └────────────────────┘      │  ║
║                 │                                                                                 │  ║
║                 │   ┌────────────────────┐  ┌────────────────────┐  ┌────────────────────┐      │  ║
║                 │   │ 🤖 SQL 查詢助手    │  │ 🤖 Workflow 協調器 │  │ 🤖 文檔生成器      │      │  ║
║                 │   │ 🟢 運行中          │  │ 🟢 運行中          │  │ ⚪ 已停止          │      │  ║
║                 │   │ ──────────────────│  │ ──────────────────│  │ ──────────────────│      │  ║
║                 │   │ 將自然語言轉換為   │  │ 協調多個 Agents 協 │  │ 根據代碼和需求自動 │      │  ║
║                 │   │ SQL 查詢並執行     │  │ 同工作，完成複雜任 │  │ 生成技術文檔       │      │  ║
║                 │   │ ──────────────────│  │ 務                 │  │ ──────────────────│      │  ║
║                 │   │ 📊 67 次調用       │  │ 📊 45 次調用       │  │ 📊 12 次調用       │      │  ║
║                 │   │ ⏱️ 1.8s 平均響應   │  │ ⏱️ 5.2s 平均響應   │  │ ⏱️ 4.3s 平均響應   │      │  ║
║                 │   │ 🏷️ #SQL #數據庫   │  │ 🏷️ #工作流 #協作  │  │ 🏷️ #文檔 #自動化  │      │  ║
║                 │   │ ──────────────────│  │ ──────────────────│  │ ──────────────────│      │  ║
║                 │   │ [⏸ 停止] [🧪 測試]│  │ [⏸ 停止] [🧪 測試]│  │ [▶ 啟動] [🧪 測試]│      │  ║
║                 │   │ [⚙️ 配置] [⋮ 更多]│  │ [⚙️ 配置] [⋮ 更多]│  │ [⚙️ 配置] [⋮ 更多]│      │  ║
║                 │   └────────────────────┘  └────────────────────┘  └────────────────────┘      │  ║
║                 │                                                                                 │  ║
║                 │   ┌────────────────────┐  ┌────────────────────┐  ┌────────────────────┐      │  ║
║                 │   │ 🤖 Email 助手      │  │ 🤖 知識庫問答      │  │ 🤖 圖片生成助手    │      │  ║
║                 │   │ ⚪ 已停止          │  │ 🟢 運行中          │  │ 🟡 警告            │      │  ║
║                 │   │ ──────────────────│  │ ──────────────────│  │ ──────────────────│      │  ║
║                 │   │ 自動撰寫和回覆專業 │  │ 基於內部知識庫回答 │  │ 根據描述生成圖片， │      │  ║
║                 │   │ 郵件               │  │ 員工問題           │  │ 支持多種風格       │      │  ║
║                 │   │ ──────────────────│  │ ──────────────────│  │ ──────────────────│      │  ║
║                 │   │ 📊 8 次調用        │  │ 📊 156 次調用      │  │ 📊 34 次調用       │      │  ║
║                 │   │ ⏱️ 2.0s 平均響應   │  │ ⏱️ 0.9s 平均響應   │  │ ⏱️ 8.7s 平均響應   │      │  ║
║                 │   │ 🏷️ #郵件 #自動化  │  │ 🏷️ #知識庫 #RAG   │  │ 🏷️ #圖片 #生成    │      │  ║
║                 │   │ ──────────────────│  │ ──────────────────│  │ ──────────────────│      │  ║
║                 │   │ [▶ 啟動] [🧪 測試]│  │ [⏸ 停止] [🧪 測試]│  │ [⏸ 停止] [🧪 測試]│      │  ║
║                 │   │ [⚙️ 配置] [⋮ 更多]│  │ [⚙️ 配置] [⋮ 更多]│  │ [⚙️ 配置] [⋮ 更多]│      │  ║
║                 │   └────────────────────┘  └────────────────────┘  └────────────────────┘      │  ║
║                 │                                                                                 │  ║
║                 │   ┌────────────────────┐  ┌────────────────────┐  ┌────────────────────┐      │  ║
║                 │   │ 🤖 翻譯助手        │  │ 🤖 會議記錄生成器  │  │ 🤖 代碼生成器      │      │  ║
║                 │   │ 🟢 運行中          │  │ ⚪ 已停止          │  │ 🟢 運行中          │      │  ║
║                 │   │ [Agent 卡片內容...] │  │ [Agent 卡片內容...] │  │ [Agent 卡片內容...]│      │  ║
║                 │   └────────────────────┘  └────────────────────┘  └────────────────────┘      │  ║
║                 │                                                                                 │  ║
║                 │   ─────────────────────────────────────────────────────────────────────────   │  ║
║                 │                                                                                 │  ║
║                 │   Level 4: 分頁與操作                                                          │  ║
║                 │   ═══════════════════════════════════════════════════════════════════════      │  ║
║                 │                                                                                 │  ║
║                 │   顯示 1-12 / 共 23 個 Agents              [◀ 上一頁]  [1] 2  [下一頁 ▶]       │  ║
║                 │                                                                                 │  ║
║                 └─────────────────────────────────────────────────────────────────────────────────┘  ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════╝
```

### 2.2 列表視圖（可選切換）

```
╔═══════════════════════════════════════════════════════════════════════════════════╗
║   Level 3: Agent 列表（列表視圖 - 表格佈局）                                     ║
║   ═══════════════════════════════════════════════════════════════════════════    ║
║                                                                                   ║
║   ┌─────────────────────────────────────────────────────────────────────────┐   ║
║   │ 名稱                  狀態      調用次數  響應時間  標籤         操作     │   ║
║   ├─────────────────────────────────────────────────────────────────────────┤   ║
║   │ 🤖 GPT-4 客服助手     🟢 運行中   125      1.2s    #客服 #GPT-4  [⏸][🧪][⚙️]│   ║
║   │    提供智能客服支援，解答產品和訂單問題                                 │   ║
║   ├─────────────────────────────────────────────────────────────────────────┤   ║
║   │ 🤖 數據分析助手       ⚪ 已停止    89      2.1s    #分析 #Python [▶][🧪][⚙️]│   ║
║   │    協助業務人員進行數據分析和報表生成                                   │   ║
║   ├─────────────────────────────────────────────────────────────────────────┤   ║
║   │ 🤖 Code Reviewer      🟢 運行中   234      3.5s    #開發 #審查   [⏸][🧪][⚙️]│   ║
║   │    自動審查代碼質量，提供改進建議                                       │   ║
║   ├─────────────────────────────────────────────────────────────────────────┤   ║
║   │ 🤖 SQL 查詢助手       🟢 運行中    67      1.8s    #SQL #數據庫  [⏸][🧪][⚙️]│   ║
║   │    將自然語言轉換為 SQL 查詢並執行                                      │   ║
║   ├─────────────────────────────────────────────────────────────────────────┤   ║
║   │ 🤖 Workflow 協調器    🟢 運行中    45      5.2s    #工作流 #協作 [⏸][🧪][⚙️]│   ║
║   │    協調多個 Agents 協同工作，完成複雜任務                               │   ║
║   └─────────────────────────────────────────────────────────────────────────┘   ║
║                                                                                   ║
║   顯示 1-20 / 共 23 個 Agents              [◀ 上一頁]  [1] 2  [下一頁 ▶]        ║
║                                                                                   ║
╚═══════════════════════════════════════════════════════════════════════════════════╝
```

### 2.3 尺寸規格（Desktop）

| 區域 | 寬度 | 高度 | 說明 |
|------|------|------|------|
| 頁面整體 | 1920px | 可滾動 | 標準桌面分辨率 |
| 側邊導航欄 | 200px | 100vh | 固定寬度 |
| 主內容區 | 1720px | 可滾動 | 頁面寬度 - 導航欄 |
| 頁面標題區 | 100% | 80px | 標題 + 創建按鈕 |
| 搜索篩選區 | 100% | 120px | 搜索框 + 篩選器 + 視圖切換 |
| Agent 卡片 | 各 33.3% | 240px | 3 列佈局，間距 24px |
| 分頁控制區 | 100% | 60px | 分頁和統計信息 |

---

## 3. 內容層次詳細定義

### Level 1: 頁面標題與主要操作

```
┌───────────────────────────────────────────────────────────────┐
│ 【Agents 管理】                              [ + 創建 Agent ]  │  ← H1: 32px, SemiBold
│ 管理您的 AI Agents，共 23 個 Agents                           │  ← Body: 14px, Neutral-700
└───────────────────────────────────────────────────────────────┘
```

**設計決策**:
- 清晰的頁面標題
- 主要 CTA（創建 Agent）突出顯示
- 動態顯示 Agent 總數

### Level 2: 搜索與篩選工具

**搜索框**:
```
┌───────────────────────────────────────────────────────────────┐
│ 🔍 [_____________搜索 Agent 名稱或描述..._____________]       │  ← 全寬搜索框
│                                                  [高級篩選 ▼]  │  ← 高級篩選折疊按鈕
└───────────────────────────────────────────────────────────────┘
```

**快速篩選（狀態）**:
```
狀態: ⦿ 全部 (23)   ○ 運行中 (8)   ○ 已停止 (15)     ← Radio 單選按鈕
```

**高級篩選（展開狀態）**:
```
┌───────────────────────────────────────────────────────────────┐
│ 高級篩選                                        [× 關閉]      │
│ ─────────────────────────────────────────────────────────────│
│ 標籤:         [☐ 客服] [☐ 分析] [☐ 開發] [☐ SQL]            │
│ 創建時間:     [____/__/____] 至 [____/__/____]              │
│ 模型類型:     [▼ 全部模型]                                   │
│ 響應時間:     [__] 秒內                                       │
│                                                               │
│ [重置] [應用篩選]                                             │
└───────────────────────────────────────────────────────────────┘
```

**視圖切換與排序**:
```
視圖: [⊞ 卡片]  [☰ 列表]          排序: [最近使用 ▼]       23 個結果
      (激活)    (未激活)                  (下拉選單)        (動態統計)
```

### Level 3: Agent 卡片詳細結構

**單個 Agent 卡片**:
```
┌────────────────────────────────┐
│ 🤖 GPT-4 客服助手              │  ← H3: 20px, SemiBold + Icon
│ 🟢 運行中                      │  ← 狀態: 12px + 顏色標記
│ ──────────────────────────────│
│ 提供智能客服支援，             │  ← 描述: 14px, Neutral-700
│ 解答產品和訂單問題             │     (最多 2 行，超出省略)
│ ──────────────────────────────│
│ 📊 125 次調用                  │  ← 指標: 12px
│ ⏱️ 1.2s 平均響應               │
│ 🏷️ #客服 #GPT-4               │  ← 標籤: 12px, 藍色背景
│ ──────────────────────────────│
│ [⏸ 停止] [🧪 測試]            │  ← 主要操作: Icon + Text
│ [⚙️ 配置] [⋮ 更多]            │  ← 次要操作
└────────────────────────────────┘
```

**卡片內容優先級**:
| 內容 | 優先級 | 顯示條件 |
|------|--------|---------|
| Agent 名稱 | P0 | 始終顯示 |
| 狀態標記 | P0 | 始終顯示 |
| 描述 | P0 | 始終顯示（最多 2 行）|
| 調用次數 | P0 | 始終顯示 |
| 平均響應時間 | P0 | 始終顯示 |
| 標籤 | P1 | 最多顯示 3 個，超出"+N" |
| 創建時間 | P2 | 懸停時顯示 tooltip |
| 創建者 | P2 | 懸停時顯示 tooltip |

### Level 4: 分頁與統計

```
┌───────────────────────────────────────────────────────────────┐
│ 顯示 1-12 / 共 23 個 Agents              [◀ 上一頁]  [1] 2  [下一頁 ▶] │
│                                          (禁用)     (激活)(未激活)     │
└───────────────────────────────────────────────────────────────┘
```

---

## 4. 互動元素

### 4.1 搜索功能

**實時搜索**:
- 輸入後 300ms 自動觸發搜索
- 搜索範圍: Agent 名稱、描述、標籤
- 支持模糊匹配和拼音搜索（中文）

**搜索結果高亮**:
```
┌────────────────────────────────┐
│ 🤖 GPT-4 【客服】助手          │  ← "客服" 高亮顯示（黃色背景）
│ 🟢 運行中                      │
│ ──────────────────────────────│
│ 提供智能【客服】支援，         │  ← 描述中的匹配詞也高亮
│ 解答產品和訂單問題             │
└────────────────────────────────┘
```

**空狀態（無搜索結果）**:
```
┌───────────────────────────────────────┐
│                                       │
│            🔍                         │
│                                       │
│       找不到匹配的 Agent              │
│                                       │
│   嘗試調整搜索關鍵詞或篩選條件         │
│                                       │
│   [ 清除搜索 ]                        │
│                                       │
└───────────────────────────────────────┘
```

### 4.2 篩選器互動

**狀態篩選（快速切換）**:
- 點擊即時切換，無需提交
- URL 更新（支持分享和書籤）
- 保留其他篩選條件

**高級篩選（折疊面板）**:
```
展開前: [高級篩選 ▼]  (有選中條件時顯示徽章: [高級篩選 ⓪ 3])
展開後: [高級篩選 ▲]  (顯示完整篩選表單)
```

**篩選應用流程**:
1. 用戶調整篩選條件
2. 點擊 [應用篩選]
3. 顯示加載狀態（骨架屏）
4. 更新結果並關閉篩選面板
5. 在篩選器按鈕上顯示徽章數量

### 4.3 視圖切換

**卡片視圖 ⇄ 列表視圖**:
- 用戶偏好自動保存（localStorage）
- 切換時保持篩選和排序狀態
- 動畫過渡（0.2秒淡入淡出）

**視圖特點對比**:
| 特性 | 卡片視圖 | 列表視圖 |
|------|---------|---------|
| **信息密度** | 低（12/頁） | 高（20/頁）|
| **視覺豐富度** | 高（圖標、顏色）| 中（緊湊佈局）|
| **適合場景** | 瀏覽和快速識別 | 查找和對比 |
| **操作便捷性** | 按鈕大，易點擊 | 操作集中，效率高 |

### 4.4 Agent 卡片操作

**主要操作按鈕**:
- **[停止]** / **[啟動]**: 切換運行狀態
  - 點擊後顯示確認提示（可配置關閉）
  - 狀態更新實時反映（WebSocket）

- **[測試]**: 打開測試對話窗口
  - 模態窗口，快速測試
  - 無需離開列表頁

**次要操作（更多菜單）**:
```
點擊 [⋮ 更多] 按鈕:

┌────────────────────┐
│ 📋 複製 Agent      │
│ 📊 查看統計        │
│ 🔗 獲取 API Key    │
│ 📥 導出配置        │
│ ──────────────────│
│ 🗑️ 刪除 Agent     │  ← 危險操作，紅色文字
└────────────────────┘
```

**批量操作（多選模式）**:
```
激活多選模式後:

[✓ 已選 5 個]  [全選]  [取消選擇]       [批量啟動]  [批量停止]  [批量刪除]

┌────────────────────────────────┐
│ [✓] 🤖 GPT-4 客服助手          │  ← 卡片左上角顯示複選框
│     🟢 運行中                  │
│     [卡片內容...]              │
└────────────────────────────────┘
```

### 4.5 排序選項

**排序下拉選單**:
```
點擊 [最近使用 ▼]:

┌──────────────┐
│ ✓ 最近使用   │  ← 當前選中（✓ 標記）
│   創建時間   │
│   名稱 A-Z   │
│   調用次數   │
│   響應時間   │
└──────────────┘
```

**排序邏輯**:
- **最近使用**: 按最後調用時間降序
- **創建時間**: 按創建時間降序
- **名稱 A-Z**: 按名稱字母順序
- **調用次數**: 按調用次數降序
- **響應時間**: 按平均響應時間升序

---

## 5. 響應式設計

### 5.1 平板版（768px - 1279px）

```
╔═══════════════════════════════════════════════════════════════╗
║ 🏠 SK                🔍  🔔(3)  👤Alex  ⚙️               ☰  ║
╠═══════════════════════════════════════════════════════════════╣
║                                                               ║
║ 【Agents 管理】                          [ + 創建 Agent ]     ║
║ 共 23 個 Agents                                              ║
║                                                               ║
║ 🔍 [________搜索 Agent..._________]  [高級篩選 ▼]           ║
║                                                               ║
║ 狀態: ⦿ 全部  ○ 運行中  ○ 已停止                             ║
║                                                               ║
║ [⊞ 卡片]  [☰ 列表]      [最近使用 ▼]       23 個結果         ║
║                                                               ║
║ ─────────────────────────────────────────────────────────────║
║                                                               ║
║ ┌─────────────────┐  ┌─────────────────┐                    ║
║ │ 🤖 GPT-4 客服   │  │ 🤖 數據分析助手 │                    ║ ← 2 列佈局
║ │ 🟢 運行中       │  │ ⚪ 已停止       │                    ║
║ │ [卡片內容...]   │  │ [卡片內容...]   │                    ║
║ └─────────────────┘  └─────────────────┘                    ║
║                                                               ║
║ ┌─────────────────┐  ┌─────────────────┐                    ║
║ │ 🤖 Code Reviewer│  │ 🤖 SQL 查詢助手 │                    ║
║ │ 🟢 運行中       │  │ 🟢 運行中       │                    ║
║ │ [卡片內容...]   │  │ [卡片內容...]   │                    ║
║ └─────────────────┘  └─────────────────┘                    ║
║                                                               ║
║ [ 加載更多... ]                                              ║ ← 無限滾動（可選）
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝
```

**關鍵變化**:
- 卡片從 3 列變為 2 列
- 搜索框和篩選器佔用更多垂直空間
- 考慮使用無限滾動替代分頁（移動端更友好）

### 5.2 移動版（<768px）

```
╔═══════════════════════════════════════════╗
║ ☰  Agents 管理    🔍  🔔(3)  👤         ║
╠═══════════════════════════════════════════╣
║                                           ║
║ [ + 創建 Agent ]                         ║ ← 全寬按鈕
║                                           ║
║ 🔍 [______搜索..._______]  [篩選 ▼]     ║ ← 簡化篩選器
║                                           ║
║ [⊞ 卡片] [☰ 列表]         23 個結果      ║
║                                           ║
║ ───────────────────────────────────────  ║
║                                           ║
║ ┌───────────────────────────────────────┐║
║ │ 🤖 GPT-4 客服助手                     │║ ← 1 列佈局，簡化內容
║ │ 🟢 運行中                             │║
║ │ ─────────────────────────────────────│║
║ │ 提供智能客服支援...                   │║
║ │                                       │║
║ │ 📊 125 次 | ⏱️ 1.2s                  │║ ← 指標橫向排列
║ │                                       │║
║ │ [⏸ 停止]  [🧪 測試]  [⋮]             │║ ← 簡化操作按鈕
║ └───────────────────────────────────────┘║
║                                           ║
║ ┌───────────────────────────────────────┐║
║ │ 🤖 數據分析助手                       │║
║ │ ⚪ 已停止                             │║
║ │ ─────────────────────────────────────│║
║ │ 協助業務人員進行數據分析...           │║
║ │                                       │║
║ │ 📊 89 次 | ⏱️ 2.1s                   │║
║ │                                       │║
║ │ [▶ 啟動]  [🧪 測試]  [⋮]             │║
║ └───────────────────────────────────────┘║
║                                           ║
║ [ 加載更多... ]                          ║
║                                           ║
╠═══════════════════════════════════════════╣
║ 🏠  🤖  💬  📊  👤                       ║ ← 底部導航
╚═══════════════════════════════════════════╝
```

**關鍵變化**:
- 卡片單列顯示
- 標籤隱藏（可在詳情頁查看）
- 篩選器簡化為彈出式選單
- 使用無限滾動（下拉加載更多）
- 操作按鈕減少（[配置] 移到更多菜單）

---

## 6. 狀態管理

### 6.1 空狀態（無 Agents）

```
╔═══════════════════════════════════════════════════════════════╗
║                                                               ║
║ 【Agents 管理】                          [ + 創建 Agent ]     ║
║                                                               ║
║ ─────────────────────────────────────────────────────────────║
║                                                               ║
║                                                               ║
║                        🤖                                     ║
║                                                               ║
║               還沒有任何 Agent                                ║
║                                                               ║
║         開始創建您的第一個 AI Agent                           ║
║     或從模板庫選擇預設的 Agent 快速開始                       ║
║                                                               ║
║     [ + 創建 Agent ]    [ 📚 瀏覽模板 ]                       ║
║                                                               ║
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝
```

### 6.2 加載狀態（骨架屏）

```
┌────────────────────────────────┐
│ 🤖 ░░░░░░░░░░░░░░░░░          │  ← 灰色脈動動畫
│ ○ ░░░░░                       │
│ ──────────────────────────────│
│ ░░░░░░░░░░░░░░░░░░░░░░        │
│ ░░░░░░░░░░░░░░░               │
│ ──────────────────────────────│
│ ░░ ░░░ 次調用                 │
│ ░░ ░░s 平均響應               │
│ ──────────────────────────────│
│ [░░░░] [░░░░] [░░░]           │
└────────────────────────────────┘
```

### 6.3 錯誤狀態

**加載失敗**:
```
╔═══════════════════════════════════════════════════════════════╗
║                                                               ║
║                        ⚠️                                     ║
║                                                               ║
║               載入 Agents 失敗                                ║
║                                                               ║
║         請檢查網絡連接或稍後再試                               ║
║                                                               ║
║                [ 重新載入 ]                                   ║
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝
```

**操作失敗（Agent 卡片）**:
```
┌────────────────────────────────┐
│ 🤖 GPT-4 客服助手              │
│ 🔴 啟動失敗                    │  ← 錯誤狀態，紅色標記
│ ──────────────────────────────│
│ ⚠️ 錯誤: API Key 無效          │  ← 錯誤信息顯示
│                                │
│ [ 重試 ]  [ 檢查配置 ]         │  ← 恢復操作
└────────────────────────────────┘
```

### 6.4 實時更新

**WebSocket 狀態推送**:
- Agent 啟動/停止 → 實時更新卡片狀態
- 調用次數增加 → 每 30 秒批量更新
- 新 Agent 創建 → 自動添加到列表頂部

**樂觀更新（Optimistic Update）**:
```
用戶點擊 [啟動] →
1. 立即更新 UI（按鈕變為 [⏸ 停止]，狀態變為 🟡 啟動中）
2. 發送 API 請求
3. 成功 → 狀態更新為 🟢 運行中
4. 失敗 → 回滾 UI，顯示錯誤信息
```

---

## 7. 可訪問性（Accessibility）

### 7.1 鍵盤導航

**Tab 順序**:
1. 搜索框
2. 高級篩選按鈕
3. 狀態篩選器（全部 → 運行中 → 已停止）
4. 視圖切換按鈕
5. 排序下拉選單
6. Agent 卡片（按行從左到右，從上到下）
   - 每個卡片內: 停止/啟動 → 測試 → 配置 → 更多
7. 分頁控制（上一頁 → 頁碼 → 下一頁）

**快捷鍵**:
| 快捷鍵 | 操作 |
|--------|------|
| `/` | 聚焦搜索框 |
| `Cmd+N` | 創建新 Agent |
| `Cmd+F` | 打開高級篩選 |
| `↑/↓` | 在卡片間導航 |
| `Enter` | 打開 Agent 詳情 |
| `Space` | 啟動/停止 Agent（聚焦在卡片上）|
| `T` | 測試 Agent（聚焦在卡片上）|
| `Esc` | 關閉篩選面板 |

### 7.2 ARIA 標籤

```html
<!-- 搜索框 -->
<input
  type="search"
  aria-label="搜索 Agent 名稱或描述"
  aria-describedby="search-help"
>
<span id="search-help">支持模糊搜索和標籤搜索</span>

<!-- 狀態篩選 -->
<div role="radiogroup" aria-label="按狀態篩選">
  <button role="radio" aria-checked="true">全部 (23)</button>
  <button role="radio" aria-checked="false">運行中 (8)</button>
  <button role="radio" aria-checked="false">已停止 (15)</button>
</div>

<!-- Agent 卡片 -->
<article
  role="article"
  aria-label="Agent: GPT-4 客服助手，狀態: 運行中"
  tabindex="0"
>
  <h3>GPT-4 客服助手</h3>
  <span role="status" aria-live="polite">🟢 運行中</span>
  <button aria-label="停止 GPT-4 客服助手">⏸ 停止</button>
  <button aria-label="測試 GPT-4 客服助手">🧪 測試</button>
</article>

<!-- 分頁 -->
<nav aria-label="分頁導航">
  <button aria-label="上一頁" disabled>◀ 上一頁</button>
  <button aria-label="第 1 頁，當前頁" aria-current="page">1</button>
  <button aria-label="第 2 頁">2</button>
  <button aria-label="下一頁">下一頁 ▶</button>
</nav>
```

### 7.3 顏色和對比度

| 元素 | 前景色 | 背景色 | 對比度 | 符合標準 |
|------|-------|-------|-------|---------|
| Agent 名稱 | Neutral-900 | White | 15.8:1 | ✅ AAA |
| 描述文字 | Neutral-700 | White | 7.2:1 | ✅ AAA |
| 運行中狀態 | White | Success-700 | 6.3:1 | ✅ AAA |
| 已停止狀態 | White | Neutral-600 | 4.6:1 | ✅ AA |
| 主要按鈕 | White | Primary-500 | 4.5:1 | ✅ AA |

---

## 8. 性能優化

### 8.1 虛擬滾動（大量 Agents）

**問題**: 當 Agents 數量 >100 時，DOM 節點過多影響性能

**解決方案**: 使用虛擬滾動技術
- 只渲染可見區域的卡片（~15 個）
- 動態計算滾動位置和可見範圍
- 使用 `react-window` 或 `react-virtualized`

**實現示例**:
```typescript
import { FixedSizeGrid } from 'react-window';

<FixedSizeGrid
  columnCount={3}
  columnWidth={400}
  height={800}
  rowCount={Math.ceil(agents.length / 3)}
  rowHeight={260}
  width={1200}
>
  {({ columnIndex, rowIndex, style }) => (
    <div style={style}>
      <AgentCard agent={agents[rowIndex * 3 + columnIndex]} />
    </div>
  )}
</FixedSizeGrid>
```

### 8.2 搜索防抖（Debounce）

```typescript
const [searchTerm, setSearchTerm] = useState('');
const debouncedSearch = useDebounce(searchTerm, 300);

// 只在用戶停止輸入 300ms 後才觸發搜索
useEffect(() => {
  if (debouncedSearch) {
    fetchAgents({ search: debouncedSearch });
  }
}, [debouncedSearch]);
```

### 8.3 圖片懶加載

- Agent 卡片中的圖標使用 SVG（輕量）
- 如有 Agent 自定義圖片，使用懶加載
- 使用 `loading="lazy"` 屬性或 Intersection Observer

### 8.4 緩存策略

| 數據類型 | 緩存時長 | 失效策略 |
|---------|---------|---------|
| Agent 列表 | 2 分鐘 | 用戶操作（啟動/停止/刪除）後立即失效 |
| 篩選選項 | 10 分鐘 | 標籤列表、模型列表等靜態數據 |
| 用戶偏好 | 永久 | 視圖模式、排序方式存儲在 localStorage |

---

## 9. 設計決策記錄（ADR）

### 決策 1: 卡片視圖 vs 列表視圖

**選擇**: 默認卡片視圖，支持切換到列表視圖

**理由**:
- 卡片視圖更直觀，適合快速瀏覽和識別
- 列表視圖信息密度高，適合查找和對比
- 給用戶選擇權，滿足不同使用場景

**權衡**:
- 增加開發成本（需維護兩種視圖）
- 但顯著提升用戶體驗

### 決策 2: 實時搜索 vs 提交搜索

**選擇**: 實時搜索（300ms 防抖）

**理由**:
- 更快的反饋，符合現代 Web 應用習慣
- 減少用戶操作步驟（無需點擊搜索按鈕）

**權衡**:
- API 請求頻率增加
- 使用防抖（debounce）和緩存減輕服務器壓力

### 決策 3: 分頁 vs 無限滾動

**選擇**: 桌面端分頁，移動端無限滾動

**理由**:
- 桌面端: 分頁更適合大屏幕，用戶可快速跳轉
- 移動端: 無限滾動更自然，適合觸屏滑動

**權衡**:
- 需實現兩套加載邏輯
- 但提供最佳的平台體驗

### 決策 4: 狀態更新策略

**選擇**: 樂觀更新 + WebSocket 實時推送

**理由**:
- 樂觀更新提供即時反饋（UX）
- WebSocket 確保狀態同步（可靠性）

**權衡**:
- 實現複雜度增加
- 但顯著提升用戶感知的響應速度

---

## 10. 技術實現建議

### 10.1 數據結構

```typescript
interface Agent {
  id: string;
  name: string;
  description: string;
  status: 'running' | 'stopped' | 'error' | 'warning';
  metrics: {
    totalCalls: number;
    avgResponseTime: number;  // 秒
    lastCallAt: string;       // ISO 8601
  };
  tags: string[];
  model: {
    provider: string;  // 'openai' | 'azure' | 'anthropic'
    name: string;      // 'gpt-4' | 'claude-3'
  };
  createdAt: string;
  createdBy: string;
}

interface AgentListState {
  agents: Agent[];
  filters: {
    search: string;
    status: 'all' | 'running' | 'stopped';
    tags: string[];
    dateRange?: [string, string];
  };
  view: 'card' | 'list';
  sort: 'recent' | 'created' | 'name' | 'calls' | 'responseTime';
  pagination: {
    page: number;
    pageSize: number;
    total: number;
  };
}
```

### 10.2 API 端點

```typescript
// GET /api/agents
// 查詢參數:
{
  search?: string;
  status?: 'running' | 'stopped';
  tags?: string[];
  sort?: string;
  page?: number;
  pageSize?: number;
}

// POST /api/agents/:id/start
// 啟動 Agent

// POST /api/agents/:id/stop
// 停止 Agent

// DELETE /api/agents/:id
// 刪除 Agent
```

### 10.3 狀態管理示例（Zustand）

```typescript
import create from 'zustand';

interface AgentListStore {
  agents: Agent[];
  filters: Filters;
  view: 'card' | 'list';

  setAgents: (agents: Agent[]) => void;
  setFilters: (filters: Partial<Filters>) => void;
  toggleView: () => void;
  updateAgentStatus: (id: string, status: Agent['status']) => void;
}

export const useAgentListStore = create<AgentListStore>((set) => ({
  agents: [],
  filters: { search: '', status: 'all', tags: [] },
  view: 'card',

  setAgents: (agents) => set({ agents }),
  setFilters: (filters) => set((state) => ({
    filters: { ...state.filters, ...filters }
  })),
  toggleView: () => set((state) => ({
    view: state.view === 'card' ? 'list' : 'card'
  })),
  updateAgentStatus: (id, status) => set((state) => ({
    agents: state.agents.map(agent =>
      agent.id === id ? { ...agent, status } : agent
    )
  })),
}));
```

### 10.4 WebSocket 實時更新

```typescript
useEffect(() => {
  const ws = new WebSocket('ws://localhost:8000/agents/updates');

  ws.onmessage = (event) => {
    const update = JSON.parse(event.data);

    switch (update.type) {
      case 'status_changed':
        updateAgentStatus(update.agentId, update.status);
        break;
      case 'agent_created':
        // 在列表頂部添加新 Agent
        break;
      case 'agent_deleted':
        // 從列表移除
        break;
    }
  };

  return () => ws.close();
}, []);
```

---

## 11. 後續迭代

### 11.1 短期優化（1-2 個月）

- **批量操作**: 選擇多個 Agents 進行批量啟動/停止/刪除
- **標籤管理**: 創建、編輯、刪除標籤
- **保存篩選器**: 將常用篩選條件保存為快捷入口
- **導入/導出**: 批量導入和導出 Agent 配置

### 11.2 中期增強（3-6 個月）

- **Agent 分組**: 按項目或用途分組管理
- **模板市場**: 瀏覽和使用社區提供的 Agent 模板
- **性能報表**: Agent 性能趨勢圖表
- **協作功能**: 多用戶共享和協作管理 Agents

### 11.3 長期願景（6-12 個月）

- **AI 推薦**: 根據使用情況智能推薦優化方案
- **自動化運維**: 自動擴容、故障轉移
- **版本管理**: Agent 配置版本控制和回滾
- **A/B 測試**: 對比不同 Agent 配置的效果

---

## 12. 參考資料

### 設計參考

- [GitHub Repository List](https://github.com/) - 列表視圖參考
- [AWS EC2 Instances](https://console.aws.amazon.com/ec2/) - 狀態管理參考
- [Vercel Projects](https://vercel.com/dashboard) - 卡片佈局參考
- [Linear Issues](https://linear.app/) - 篩選器設計參考

### 組件庫

- [React Window](https://react-window.vercel.app/) - 虛擬滾動
- [Headless UI](https://headlessui.com/) - 無障礙組件
- [Downshift](https://www.downshift-js.com/) - 可訪問的下拉選單

---

**狀態**: ✅ Wireframe 已完成
**下一步**: 創建 Agent 創建頁 Wireframe（03-agent-create.md）
**審核**: 待 UI/UX 團隊審核
**更新日期**: 2025-10-29
