# Agent 詳情頁 - Low-Fidelity Wireframe

**版本**: 1.0.0
**日期**: 2025-10-29
**狀態**: ✅ 已完成
**優先級**: P0
**複雜度**: ⭐⭐⭐⭐⭐ (最高)

[◀ 上一個: Agent 創建](./03-agent-create.md) | [返回索引](./README.md) | [下一個: 對話界面 ▶](./05-conversation.md)

---

## 1. 頁面概覽

### 用途和目標

Agent 詳情頁是 Agent 配置、管理、測試的核心樞紐，提供：
- **完整配置**: 查看和編輯所有 Agent 配置
- **實時監控**: Agent 運行狀態和性能指標
- **測試調試**: 內置測試工具和日誌查看
- **版本管理**: 配置變更歷史和回滾
- **部署控制**: 發布管理和 API 密鑰

### 主要用戶

| Persona | 使用頻率 | 關注重點 |
|---------|---------|---------|
| **Alex（開發者）** | 每天多次 | 配置調整、測試調試、性能優化 |
| **Sarah（分析師）** | 每週數次 | 查看狀態、簡單測試、使用 Agent |
| **David（管理員）** | 每週 1-2 次 | 監控指標、安全設置、成本控制 |

### 成功指標

- ✅ 用戶可在 **10 秒內** 找到任何配置項
- ✅ 配置變更保存響應時間 **<500ms**
- ✅ 測試對話響應時間符合 Agent 配置
- ✅ 標籤頁切換流暢，無卡頓

---

## 2. 頁面結構總覽

### 2.1 整體佈局

```
╔═══════════════════════════════════════════════════════════════════╗
║ 頂部導航欄（全局）                                                ║
╠═══════════════════════════════════════════════════════════════════╣
║ ┌──────────┐ ┌──────────────────────────────────────────────────┐║
║ │          │ │ Level 1: 頁面頭部                                │║
║ │          │ │ ├─ Agent 名稱 + 狀態                             │║
║ │  側邊    │ │ └─ 主要操作按鈕                                   │║
║ │  導航欄  │ ├──────────────────────────────────────────────────┤║
║ │          │ │ Level 2: 標籤頁導航                              │║
║ │          │ │ ├─ 📝 基本配置                                   │║
║ │  (200px) │ │ ├─ 👤 Persona 配置                               │║
║ │          │ │ ├─ 🔧 能力配置                                   │║
║ │          │ │ ├─ 🧪 測試與調試                                 │║
║ │          │ │ └─ 🚀 部署與發布                                 │║
║ │          │ ├──────────────────────────────────────────────────┤║
║ │          │ │ Level 3: 標籤頁內容區域                          │║
║ │          │ │ (根據選中的標籤頁動態變化)                        │║
║ │          │ │                                                  │║
║ │          │ │ [表單字段 / 配置選項 / 測試工具]                  │║
║ │          │ │                                                  │║
║ │          │ ├──────────────────────────────────────────────────┤║
║ │          │ │ Level 4: 底部操作欄                              │║
║ │          │ │ [取消] [保存更改] [查看歷史]                      │║
║ └──────────┘ └──────────────────────────────────────────────────┘║
╚═══════════════════════════════════════════════════════════════════╝
```

### 2.2 五個核心標籤頁

| 標籤 | 圖標 | 用途 | 複雜度 | 主要用戶 |
|------|------|------|--------|---------|
| **基本配置** | 📝 | Agent 基本信息和 LLM 配置 | 中 | All |
| **Persona 配置** | 👤 | System Prompt 和對話風格 | 高 | Alex |
| **能力配置** | 🔧 | 知識庫、函數、插件 | 高 | Alex |
| **測試與調試** | 🧪 | 測試對話、日誌、性能 | 中 | Alex, Sarah |
| **部署與發布** | 🚀 | 版本管理、API 密鑰、發布 | 中 | Alex, David |

---

## 3. 詳細佈局（Desktop - 1920x1080）

### 3.1 頁面頭部（Level 1）

```
╔═══════════════════════════════════════════════════════════════════════════════════════════════════════╗
║  🏠 Semantic Kernel          🔍 Search (Cmd+K)              🔔(3)  👤Alex Chen  ⚙️  ❓               ║
╠═══════════════════════════════════════════════════════════════════════════════════════════════════════╣
║ ┌─────────────┐ ┌─────────────────────────────────────────────────────────────────────────────────┐  ║
║ │ 🏠 首頁     │ │                                                                                 │  ║
║ │ 🤖 Agents   │ │   Level 1: 頁面頭部                                                             │  ║
║ │ 💬 對話     │ │   ═══════════════════════════════════════════════════════════════════════      │  ║
║ │ 🧠 知識庫   │ │                                                                                 │  ║
║ │ 🔬 代碼執行 │ │   Agents / Agent 列表 / GPT-4 客服助手                              [← 返回列表]│  ║
║ │ 📊 SQL查詢  │ │   ─────────────────────────────────────────────────────────────────────────   │  ║
║ │ 🔄 工作流   │ │                                                                                 │  ║
║ │ 👤 Persona  │ │   🤖 【GPT-4 客服助手】 ✏️                    🟢 運行中    最後更新: 2 分鐘前    │  ║
║ │ ─────────   │ │      (可編輯標題)                              (狀態徽章)  (自動保存時間)      │  ║
║ │ 📈 Analytics│ │                                                                                 │  ║
║ │ ⚙️ Settings │ │   提供智能客服支援，解答產品和訂單問題                                          │  ║
║ └─────────────┘ │   (描述，1-2 行)                                                                │  ║
║                 │                                                                                 │  ║
║                 │   [⏸ 停止]  [🧪 測試對話]  [📊 查看統計]  [⋮ 更多]                             │  ║
║                 │   (主操作)  (次要操作)     (次要操作)      (更多菜單)                           │  ║
║                 │                                                                                 │  ║
║                 │   ─────────────────────────────────────────────────────────────────────────   │  ║
║                 │                                                                                 │  ║
║                 │   Level 2: 標籤頁導航                                                          │  ║
║                 │   ═══════════════════════════════════════════════════════════════════════      │  ║
║                 │                                                                                 │  ║
║                 │   📝 基本配置  │  👤 Persona 配置  │  🔧 能力配置  │  🧪 測試與調試  │  🚀 部署  │  ║
║                 │   ═══════════                                                                   │  ║
║                 │   (選中狀態，藍色下劃線)                                                        │  ║
║                 │                                                                                 │  ║
║                 └─────────────────────────────────────────────────────────────────────────────────┘  ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════╝
```

**頁面頭部關鍵元素**:

1. **面包屑導航**: `Agents / Agent 列表 / GPT-4 客服助手`
2. **Agent 名稱**: 可編輯（點擊 ✏️ 圖標）
3. **狀態徽章**: 實時顯示（運行中/已停止/錯誤）
4. **最後更新時間**: 自動保存時間戳
5. **主要操作**:
   - [⏸ 停止] / [▶ 啟動]（根據狀態切換）
   - [🧪 測試對話]（彈出測試窗口）
   - [📊 查看統計]（跳轉到 Analytics）
   - [⋮ 更多]（下拉菜單）

**更多菜單**:
```
點擊 [⋮ 更多]:
┌────────────────────┐
│ 📋 複製 Agent      │
│ 📥 導出配置        │
│ 📜 查看變更歷史    │
│ 🔄 回滾到上一版本  │
│ ──────────────────│
│ 🗑️ 刪除 Agent     │  ← 危險操作
└────────────────────┘
```

---

### 3.2 標籤頁 1: 📝 基本配置

```
╔═══════════════════════════════════════════════════════════════════════════════════════════════════════╗
║   📝 基本配置  │  👤 Persona 配置  │  🔧 能力配置  │  🧪 測試與調試  │  🚀 部署與發布                  ║
║   ═══════════                                                                                          ║
╠═══════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                       ║
║  ┌────────────────────────────────────────────┐  ┌────────────────────────────────────────────────┐ ║
║  │ Agent 基本信息                             │  │ 📊 Agent 統計                                  │ ║
║  │ ──────────────────────────────────────────│  │ ───────────────────────────────────────────    │ ║
║  │                                            │  │                                                │ ║
║  │ Agent 名稱 *                               │  │ 總調用次數                                      │ ║
║  │ ┌────────────────────────────────────────┐│  │ 125 次                                         │ ║
║  │ │ GPT-4 客服助手                         ││  │ ───────────────────────────────────────────    │ ║
║  │ └────────────────────────────────────────┘│  │ 平均響應時間                                    │ ║
║  │                                            │  │ 1.2 秒                                         │ ║
║  │ 描述（可選）                               │  │ ───────────────────────────────────────────    │ ║
║  │ ┌────────────────────────────────────────┐│  │ 成功率                                          │ ║
║  │ │ 提供智能客服支援，解答產品和訂單問題   ││  │ 98.5%                                          │ ║
║  │ │                                        ││  │ ───────────────────────────────────────────    │ ║
║  │ └────────────────────────────────────────┘│  │ 最後使用                                        │ ║
║  │                                            │  │ 2 分鐘前                                        │ ║
║  │ 標籤                                       │  │ ───────────────────────────────────────────    │ ║
║  │ #客服 #GPT-4 #生產環境        [+ 添加標籤]│  │ 創建時間                                        │ ║
║  │                                            │  │ 2025-10-15 14:30                               │ ║
║  │ 圖標                                       │  │ ───────────────────────────────────────────    │ ║
║  │ 🤖 [更換圖標]                              │  │ 創建者                                          │ ║
║  │                                            │  │ Alex Chen                                      │ ║
║  │ ──────────────────────────────────────────│  │                                                │ ║
║  │                                            │  │ [ 查看詳細報告 → ]                             │ ║
║  │ LLM 配置                                   │  └────────────────────────────────────────────────┘ ║
║  │ ──────────────────────────────────────────│                                                    ║
║  │                                            │                                                    ║
║  │ Provider *                                 │                                                    ║
║  │ ⦿ OpenAI  ○ Azure OpenAI  ○ Anthropic     │                                                    ║
║  │                                            │                                                    ║
║  │ 模型 *                                     │                                                    ║
║  │ ┌────────────────────────────────────────┐│                                                    ║
║  │ │ GPT-4 ▼                                ││                                                    ║
║  │ └────────────────────────────────────────┘│                                                    ║
║  │ 💡 推薦使用 GPT-4 以獲得最佳性能和理解能力 │                                                    ║
║  │                                            │                                                    ║
║  │ API Key                                    │                                                    ║
║  │ ┌────────────────────────────────────────┐│                                                    ║
║  │ │ sk-••••••••••••••••••••••••••••••••   ││  ← 隱藏顯示                                        ║
║  │ └────────────────────────────────────────┘│                                                    ║
║  │ [👁️ 顯示] [🔄 輪換密鑰]                   │                                                    ║
║  │                                            │                                                    ║
║  │ Temperature（創造力）                      │                                                    ║
║  │ ┌────────────────────────────────────────┐│                                                    ║
║  │ │ ●───────────────────────              ││  ← 滑桿控制                                        ║
║  │ └────────────────────────────────────────┘│                                                    ║
║  │ 0.7  (平衡模式)                            │                                                    ║
║  │ 說明: 較低值更專注和一致，較高值更有創意    │                                                    ║
║  │                                            │                                                    ║
║  │ Max Tokens（最大輸出長度）                 │                                                    ║
║  │ ┌────────────────────────────────────────┐│                                                    ║
║  │ │ 2000                                   ││                                                    ║
║  │ └────────────────────────────────────────┘│                                                    ║
║  │ 建議: 1000-4000 之間                       │                                                    ║
║  │                                            │                                                    ║
║  │ [ 展開高級設置 ▼ ]                        │                                                    ║
║  │ ┌────────────────────────────────────────┐│  ← 折疊的高級選項                                  ║
║  │ │ Top P: 1.0                             ││                                                    ║
║  │ │ Frequency Penalty: 0.0                 ││                                                    ║
║  │ │ Presence Penalty: 0.0                  ││                                                    ║
║  │ │ Stop Sequences: [添加...]              ││                                                    ║
║  │ └────────────────────────────────────────┘│                                                    ║
║  │                                            │                                                    ║
║  └────────────────────────────────────────────┘                                                    ║
║                                                                                                       ║
║  ─────────────────────────────────────────────────────────────────────────────────────────────────   ║
║                                                                                                       ║
║  [取消]                     💾 已保存 (2 分鐘前)                                  [保存更改]         ║
║                                                                                   (固定在底部)       ║
║                                                                                                       ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════╝
```

**基本配置標籤頁關鍵要素**:

1. **雙列佈局**: 左側表單，右側統計
2. **必填標記**: * 表示必填字段
3. **內聯幫助**: 💡 推薦和說明文字
4. **漸進披露**: 高級設置默認折疊
5. **實時統計**: 右側實時更新
6. **自動保存**: 顯示最後保存時間

---

### 3.3 標籤頁 2: 👤 Persona 配置

```
╔═══════════════════════════════════════════════════════════════════════════════════════════════════════╗
║   📝 基本配置  │  👤 Persona 配置  │  🔧 能力配置  │  🧪 測試與調試  │  🚀 部署與發布                  ║
║                   ═════════════                                                                        ║
╠═══════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                       ║
║  ┌────────────────────────────────────────────┐  ┌────────────────────────────────────────────────┐ ║
║  │ Persona 設計                               │  │ 💬 Persona 預覽                                │ ║
║  │ ──────────────────────────────────────────│  │ ───────────────────────────────────────────    │ ║
║  │                                            │  │                                                │ ║
║  │ System Prompt *                            │  │ 當前 Persona:                                  │ ║
║  │ ┌────────────────────────────────────────┐│  │ 一個專業、友善的客服助手                        │ ║
║  │ │ 你是一個專業、友善的客服助手。       ││  │                                                │ ║
║  │ │ 你的主要任務是:                       ││  │ 測試對話:                                      │ ║
║  │ │ 1. 解答客戶關於產品的問題             ││  │ ┌────────────────────────────────────────┐    │ ║
║  │ │ 2. 協助客戶查詢訂單狀態               ││  │ │ 用戶: 你好，我想了解退貨政策            │    │ ║
║  │ │ 3. 提供訂單修改和退換貨支援           ││  │ │                                        │    │ ║
║  │ │                                        ││  │ │ Agent: 您好！很高興為您服務。          │    │ ║
║  │ │ 你應該:                               ││  │ │ 我們的退貨政策如下:                    │    │ ║
║  │ │ - 使用友善、專業的語氣                 ││  │ │ 1. 購買後 30 天內可無理由退貨          │    │ ║
║  │ │ - 主動詢問客戶需求                     ││  │ │ 2. 商品需保持完整包裝...               │    │ ║
║  │ │ - 提供清晰、準確的信息                 ││  │ └────────────────────────────────────────┘    │ ║
║  │ │ - 如果無法解決，引導客戶聯繫人工客服   ││  │                                                │ ║
║  │ │                                        ││  │ [ 更改測試輸入 ]                               │ ║
║  │ │                                        ││  │                                                │ ║
║  │ └────────────────────────────────────────┘│  └────────────────────────────────────────────────┘ ║
║  │ 1024 / 4000 字符                           │                                                    ║
║  │                                            │                                                    ║
║  │ [ AI 輔助優化 Prompt 🤖 ]                  │  ← AI 生成建議                                     ║
║  │                                            │                                                    ║
║  │ ──────────────────────────────────────────│                                                    ║
║  │                                            │                                                    ║
║  │ 對話風格                                   │                                                    ║
║  │ ⦿ 專業正式  ○ 友善隨和  ○ 簡潔直接        │                                                    ║
║  │                                            │                                                    ║
║  │ ──────────────────────────────────────────│                                                    ║
║  │                                            │                                                    ║
║  │ Few-Shot 範例（可選）                      │                                                    ║
║  │ 提供 2-3 個對話範例，幫助 Agent 理解預期行為│                                                    ║
║  │                                            │                                                    ║
║  │ ┌────────────────────────────────────────┐│                                                    ║
║  │ │ 範例 1:                                ││                                                    ║
║  │ │ 用戶: 我的訂單什麼時候發貨？           ││                                                    ║
║  │ │ Agent: 請提供您的訂單號，我來幫您查詢。││                                                    ║
║  │ │                                        ││                                                    ║
║  │ │ [× 刪除]                               ││                                                    ║
║  │ └────────────────────────────────────────┘│                                                    ║
║  │                                            │                                                    ║
║  │ ┌────────────────────────────────────────┐│                                                    ║
║  │ │ 範例 2:                                ││                                                    ║
║  │ │ 用戶: 可以修改收貨地址嗎？             ││                                                    ║
║  │ │ Agent: 當然可以。請告訴我您的訂單號... ││                                                    ║
║  │ │                                        ││                                                    ║
║  │ │ [× 刪除]                               ││                                                    ║
║  │ └────────────────────────────────────────┘│                                                    ║
║  │                                            │                                                    ║
║  │ [ + 添加範例 ]                             │                                                    ║
║  │                                            │                                                    ║
║  │ ──────────────────────────────────────────│                                                    ║
║  │                                            │                                                    ║
║  │ 約束條件（可選）                           │                                                    ║
║  │ 定義 Agent 不應該做的事情                 │                                                    ║
║  │                                            │                                                    ║
║  │ ┌────────────────────────────────────────┐│                                                    ║
║  │ │ - 不要承諾超出政策範圍的事項           ││                                                    ║
║  │ │ - 不要提供醫療、法律等專業建議         ││                                                    ║
║  │ │ - 不要透露其他客戶的信息               ││                                                    ║
║  │ └────────────────────────────────────────┘│                                                    ║
║  │                                            │                                                    ║
║  └────────────────────────────────────────────┘                                                    ║
║                                                                                                       ║
║  ─────────────────────────────────────────────────────────────────────────────────────────────────   ║
║                                                                                                       ║
║  [取消]                     💾 已保存 (1 分鐘前)                                  [保存更改]         ║
║                                                                                                       ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════╝
```

**Persona 配置關鍵要素**:

1. **System Prompt 編輯器**: 大文本區域，支持 Markdown
2. **字符計數**: 實時顯示字符數和限制
3. **AI 輔助**: 使用 AI 優化 Prompt
4. **實時預覽**: 右側測試對話展示效果
5. **Few-Shot 範例**: 可添加多個範例
6. **約束條件**: 明確不應該做的事情

---

### 3.4 標籤頁 3: 🔧 能力配置

```
╔═══════════════════════════════════════════════════════════════════════════════════════════════════════╗
║   📝 基本配置  │  👤 Persona 配置  │  🔧 能力配置  │  🧪 測試與調試  │  🚀 部署與發布                  ║
║                                       ═══════════                                                      ║
╠═══════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                       ║
║  Agent 能力                                                                                           ║
║  為您的 Agent 添加額外能力，擴展其功能範圍                                                             ║
║                                                                                                       ║
║  ─────────────────────────────────────────────────────────────────────────────────────────────────   ║
║                                                                                                       ║
║  ┌────────────────────────────────────────────┐  ┌────────────────────────────────────────────────┐ ║
║  │ 🧠 知識庫檢索（RAG）                       │  │ 📚 已選擇 2 個知識庫                           │ ║
║  │ ═══════════════════                        │  │ ───────────────────────────────────────────    │ ║
║  │                                            │  │                                                │ ║
║  │ ☑ 啟用知識庫檢索                           │  │ ┌────────────────────────────────────────┐    │ ║
║  │                                            │  │ │ ✓ 產品目錄知識庫                       │    │ ║
║  │ 選擇知識庫 (多選):                         │  │ │   • 文檔數: 1,234                      │    │ ║
║  │ ┌────────────────────────────────────────┐│  │ │   • 最後更新: 1 天前                   │    │ ║
║  │ │ ✓ 產品目錄知識庫                       ││  │ │   [× 移除]                             │    │ ║
║  │ │ ✓ 常見問題 FAQ                         ││  │ └────────────────────────────────────────┘    │ ║
║  │ │ ☐ 訂單處理流程                         ││  │                                                │ ║
║  │ │ ☐ 公司政策文檔                         ││  │ ┌────────────────────────────────────────┐    │ ║
║  │ └────────────────────────────────────────┘│  │ │ ✓ 常見問題 FAQ                         │    │ ║
║  │                                            │  │ │   • 文檔數: 89                         │    │ ║
║  │ 檢索配置:                                  │  │ │   • 最後更新: 3 天前                   │    │ ║
║  │ • Top K: [5_]（返回最相關的 5 個片段）     │  │ │   [× 移除]                             │    │ ║
║  │ • 相似度閾值: [0.7_]（最低匹配分數）       │  │ └────────────────────────────────────────┘    │ ║
║  │                                            │  │                                                │ ║
║  └────────────────────────────────────────────┘  │ [ + 添加更多知識庫 ]                           │ ║
║                                                  └────────────────────────────────────────────────┘ ║
║                                                                                                       ║
║  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐  ║
║  │ ⚙️ 函數調用（Function Calling）                                                               │  ║
║  │ ═══════════════════════════                                                                    │  ║
║  │                                                                                                │  ║
║  │ ☑ 啟用函數調用                                                                                 │  ║
║  │                                                                                                │  ║
║  │ 已啟用的函數 (3 個):                                                                            │  ║
║  │                                                                                                │  ║
║  │ ┌──────────────────────────────────┬──────────────────────────────────┬────────────────────┐  │  ║
║  │ │ 函數名稱                         │ 描述                             │ 操作               │  │  ║
║  │ ├──────────────────────────────────┼──────────────────────────────────┼────────────────────┤  │  ║
║  │ │ get_order_status                 │ 查詢訂單狀態                     │ [配置] [× 移除]    │  │  ║
║  │ │ track_shipment                   │ 追蹤物流信息                     │ [配置] [× 移除]    │  │  ║
║  │ │ update_shipping_address          │ 更新收貨地址                     │ [配置] [× 移除]    │  │  ║
║  │ └──────────────────────────────────┴──────────────────────────────────┴────────────────────┘  │  ║
║  │                                                                                                │  ║
║  │ [ + 添加函數 ]  [ 📚 瀏覽函數庫 ]                                                              │  ║
║  │                                                                                                │  ║
║  └────────────────────────────────────────────────────────────────────────────────────────────────┘  ║
║                                                                                                       ║
║  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐  ║
║  │ 🔬 代碼執行（Code Interpreter）                                                                │  ║
║  │ ════════════════════════                                                                       │  ║
║  │                                                                                                │  ║
║  │ ☐ 啟用代碼執行                                                                                 │  ║
║  │                                                                                                │  ║
║  │ 允許 Agent 執行 Python 代碼進行數據分析、計算、可視化等操作                                     │  ║
║  │                                                                                                │  ║
║  │ 💡 適用場景: 數據分析、數學計算、圖表生成                                                       │  ║
║  │ ⚠️  注意: 啟用後會增加響應時間和成本                                                           │  ║
║  │                                                                                                │  ║
║  └────────────────────────────────────────────────────────────────────────────────────────────────┘  ║
║                                                                                                       ║
║  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐  ║
║  │ 🔌 插件（Plugins）                                                                             │  ║
║  │ ══════════                                                                                     │  ║
║  │                                                                                                │  ║
║  │ ☐ 啟用插件系統                                                                                 │  ║
║  │                                                                                                │  ║
║  │ 擴展 Agent 能力，連接第三方服務                                                                 │  ║
║  │                                                                                                │  ║
║  │ [ 瀏覽插件市場 → ]                                                                             │  ║
║  │                                                                                                │  ║
║  └────────────────────────────────────────────────────────────────────────────────────────────────┘  ║
║                                                                                                       ║
║  ─────────────────────────────────────────────────────────────────────────────────────────────────   ║
║                                                                                                       ║
║  [取消]                     💾 已保存 (30 秒前)                                   [保存更改]         ║
║                                                                                                       ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════╝
```

**能力配置關鍵要素**:

1. **模組化設計**: 4 個獨立能力區塊
2. **開關控制**: 每個能力可獨立啟用/禁用
3. **知識庫管理**: 多選知識庫，配置檢索參數
4. **函數庫**: 表格展示已啟用的函數
5. **警告提示**: 對影響性能/成本的能力給出提示

---

### 3.5 標籤頁 4: 🧪 測試與調試

```
╔═══════════════════════════════════════════════════════════════════════════════════════════════════════╗
║   📝 基本配置  │  👤 Persona 配置  │  🔧 能力配置  │  🧪 測試與調試  │  🚀 部署與發布                  ║
║                                                       ═════════════                                    ║
╠═══════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                       ║
║  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐  ║
║  │ 💬 測試對話                                                                                    │  ║
║  │ ───────────────────────────────────────────────────────────────────────────────────────────── │  ║
║  │                                                                                                │  ║
║  │ ┌────────────────────────────────────────────────────────────────────────────────────────┐   │  ║
║  │ │                                                                                          │   │  ║
║  │ │ 👤 用戶: 你好，我想查詢我的訂單狀態，訂單號是 #12345                                     │   │  ║
║  │ │                                                                                          │   │  ║
║  │ │ 🤖 Agent: 您好！我很樂意協助您查詢訂單狀態。                                            │   │  ║
║  │ │          請稍等，我正在為您查詢訂單 #12345...                                           │   │  ║
║  │ │                                                                                          │   │  ║
║  │ │          [🔧 調用函數: get_order_status(order_id='12345')]                              │   │  ║
║  │ │          ├─ 執行時間: 234ms                                                              │   │  ║
║  │ │          └─ 返回: {"status": "配送中", "eta": "2025-10-31"}                             │   │  ║
║  │ │                                                                                          │   │  ║
║  │ │          經查詢，您的訂單 #12345 目前狀態為「配送中」，預計將於 2025-10-31 送達。       │   │  ║
║  │ │          您可以通過以下連結追蹤配送進度: [追蹤連結]                                      │   │  ║
║  │ │                                                                                          │   │  ║
║  │ │          還有其他需要協助的嗎？                                                          │   │  ║
║  │ │                                                                                          │   │  ║
║  │ │          ⏱️ 響應時間: 1.2 秒 | 📊 Tokens: 156                                          │   │  ║
║  │ │                                                                                          │   │  ║
║  │ └────────────────────────────────────────────────────────────────────────────────────────┘   │  ║
║  │                                                                                                │  ║
║  │ 輸入測試消息:                                                                                  │  ║
║  │ ┌──────────────────────────────────────────────────────────────────────────────────────┐    │  ║
║  │ │ 請幫我退貨...                                                                    [發送]│    │  ║
║  │ └──────────────────────────────────────────────────────────────────────────────────────┘    │  ║
║  │                                                                                                │  ║
║  │ [ 清除對話 ]  [ 導出對話 ]  [ 查看詳細調試信息 ]                                              │  ║
║  │                                                                                                │  ║
║  └────────────────────────────────────────────────────────────────────────────────────────────────┘  ║
║                                                                                                       ║
║  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐  ║
║  │ 📜 執行日誌                                                                                    │  ║
║  │ ───────────────────────────────────────────────────────────────────────────────────────────── │  ║
║  │                                                                                                │  ║
║  │ [實時] [最近 100 條] [最近 1 小時] [今天] [自定義範圍]          🔍 [_搜索日誌_____]            │  ║
║  │                                                                                                │  ║
║  │ ┌──────────────────────────────────────────────────────────────────────────────────────────┐ │  ║
║  │ │ 2025-10-29 16:30:45  [INFO]  收到用戶請求: "你好，我想查詢..."                          │ │  ║
║  │ │ 2025-10-29 16:30:45  [DEBUG] 開始生成回應...                                             │ │  ║
║  │ │ 2025-10-29 16:30:46  [INFO]  檢測到函數調用: get_order_status                            │ │  ║
║  │ │ 2025-10-29 16:30:46  [DEBUG] 函數參數: {"order_id": "12345"}                            │ │  ║
║  │ │ 2025-10-29 16:30:46  [INFO]  函數執行成功，耗時 234ms                                     │ │  ║
║  │ │ 2025-10-29 16:30:47  [INFO]  回應生成完成，總耗時 1.2s                                   │ │  ║
║  │ │ 2025-10-29 16:30:47  [DEBUG] Tokens: prompt=89, completion=67, total=156                │ │  ║
║  │ └──────────────────────────────────────────────────────────────────────────────────────────┘ │  ║
║  │                                                                                                │  ║
║  │ [ 下載日誌 ]  [ 清除日誌 ]                                                                    │  ║
║  │                                                                                                │  ║
║  └────────────────────────────────────────────────────────────────────────────────────────────────┘  ║
║                                                                                                       ║
║  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐  ║
║  │ 📊 性能分析                                                                                    │  ║
║  │ ───────────────────────────────────────────────────────────────────────────────────────────── │  ║
║  │                                                                                                │  ║
║  │ 最近 24 小時:                                                                                  │  ║
║  │                                                                                                │  ║
║  │ ┌──────────────────┬──────────────────┬──────────────────┬──────────────────┐                │  ║
║  │ │ 總請求數         │ 平均響應時間     │ 成功率           │ 平均 Token 用量  │                │  ║
║  │ ├──────────────────┼──────────────────┼──────────────────┼──────────────────┤                │  ║
║  │ │ 125 次           │ 1.2 秒           │ 98.5%            │ 342 tokens       │                │  ║
║  │ └──────────────────┴──────────────────┴──────────────────┴──────────────────┘                │  ║
║  │                                                                                                │  ║
║  │ 響應時間分布:                                                                                  │  ║
║  │ ┌────────────────────────────────────────────────────────────────────────────┐                │  ║
║  │ │ <1s:  ████████████████████████████████ 70%                                │                │  ║
║  │ │ 1-2s: ████████████ 20%                                                    │                │  ║
║  │ │ 2-3s: ████ 8%                                                             │                │  ║
║  │ │ >3s:  █ 2%                                                                │                │  ║
║  │ └────────────────────────────────────────────────────────────────────────────┘                │  ║
║  │                                                                                                │  ║
║  │ [ 查看詳細報告 → ]                                                                             │  ║
║  │                                                                                                │  ║
║  └────────────────────────────────────────────────────────────────────────────────────────────────┘  ║
║                                                                                                       ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════╝
```

**測試與調試關鍵要素**:

1. **測試對話**: 內置聊天界面，實時測試
2. **函數調用展示**: 詳細顯示函數執行過程
3. **性能指標**: 響應時間、Token 用量
4. **執行日誌**: 實時日誌流，支持搜索
5. **性能分析**: 圖表展示性能分布

---

### 3.6 標籤頁 5: 🚀 部署與發布

```
╔═══════════════════════════════════════════════════════════════════════════════════════════════════════╗
║   📝 基本配置  │  👤 Persona 配置  │  🔧 能力配置  │  🧪 測試與調試  │  🚀 部署與發布                  ║
║                                                                           ═════════════                ║
╠═══════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                       ║
║  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐  ║
║  │ 🔑 API 訪問                                                                                    │  ║
║  │ ───────────────────────────────────────────────────────────────────────────────────────────── │  ║
║  │                                                                                                │  ║
║  │ API Endpoint                                                                                   │  ║
║  │ ┌──────────────────────────────────────────────────────────────────────────────────────┐     │  ║
║  │ │ https://api.sk-framework.com/v1/agents/gpt4-customer-service                        📋│     │  ║
║  │ └──────────────────────────────────────────────────────────────────────────────────────┘     │  ║
║  │ (點擊 📋 複製)                                                                                 │  ║
║  │                                                                                                │  ║
║  │ API Keys (2 個):                                                                               │  ║
║  │ ┌──────────────────────────────────────────────────────────────────────────────────────────┐ │  ║
║  │ │ Production Key      sk-prod-••••••••••••••••••••  [👁️ 顯示] [🔄 輪換] [🗑️ 刪除]        │ │  ║
║  │ │ 創建: 2025-10-15    最後使用: 2 分鐘前                                                    │ │  ║
║  │ │                                                                                          │ │  ║
║  │ │ Development Key     sk-dev-••••••••••••••••••••••  [👁️ 顯示] [🔄 輪換] [🗑️ 刪除]       │ │  ║
║  │ │ 創建: 2025-10-20    最後使用: 1 小時前                                                    │ │  ║
║  │ └──────────────────────────────────────────────────────────────────────────────────────────┘ │  ║
║  │                                                                                                │  ║
║  │ [ + 創建新 API Key ]                                                                           │  ║
║  │                                                                                                │  ║
║  └────────────────────────────────────────────────────────────────────────────────────────────────┘  ║
║                                                                                                       ║
║  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐  ║
║  │ 📜 版本管理                                                                                    │  ║
║  │ ───────────────────────────────────────────────────────────────────────────────────────────── │  ║
║  │                                                                                                │  ║
║  │ 當前版本: v1.2.0 (生產環境)                                                                    │  ║
║  │                                                                                                │  ║
║  │ ┌──────────────────────────────────────────────────────────────────────────────────────────┐ │  ║
║  │ │ 版本     │ 狀態     │ 發布時間           │ 變更說明                         │ 操作        │ │  ║
║  │ ├──────────┼──────────┼────────────────────┼──────────────────────────────────┼──────────── │ │  ║
║  │ │ v1.2.0   │ 🟢 生產  │ 2025-10-29 10:00   │ 優化 Persona，提升回應質量       │ [回滾] [比較]│ │  ║
║  │ │ v1.1.0   │ ⚪ 歷史  │ 2025-10-25 14:30   │ 添加訂單查詢函數                 │ [回滾] [比較]│ │  ║
║  │ │ v1.0.0   │ ⚪ 歷史  │ 2025-10-15 09:00   │ 初始版本                         │ [回滾] [比較]│ │  ║
║  │ └──────────┴──────────┴────────────────────┴──────────────────────────────────┴──────────── │ │  ║
║  │                                                                                                │  ║
║  │ 💾 當前有未保存的更改                                                                          │  ║
║  │ [ 保存為新版本 ]  輸入版本號: [v1.3.0____]  變更說明: [_________________________]              │  ║
║  │                                                                                                │  ║
║  └────────────────────────────────────────────────────────────────────────────────────────────────┘  ║
║                                                                                                       ║
║  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐  ║
║  │ 🛡️ 安全設置                                                                                   │  ║
║  │ ───────────────────────────────────────────────────────────────────────────────────────────── │  ║
║  │                                                                                                │  ║
║  │ ☑ 啟用速率限制                                                                                 │  ║
║  │   • 每分鐘最大請求數: [60__]                                                                   │  ║
║  │   • 每天最大 Token 數: [100000__]                                                              │  ║
║  │                                                                                                │  ║
║  │ ☑ 啟用內容過濾                                                                                 │  ║
║  │   • 過濾敏感內容、仇恨言論、暴力內容                                                            │  ║
║  │                                                                                                │  ║
║  │ ☑ 啟用請求日誌                                                                                 │  ║
║  │   • 日誌保留時間: [30___] 天                                                                   │  ║
║  │   • 記錄用戶輸入和 Agent 回應                                                                  │  ║
║  │                                                                                                │  ║
║  │ 允許的來源域名（CORS）:                                                                        │  ║
║  │ ┌──────────────────────────────────────────────────────────────────────────────────────────┐ │  ║
║  │ │ https://example.com                                                           [× 刪除]    │ │  ║
║  │ │ https://app.example.com                                                       [× 刪除]    │ │  ║
║  │ └──────────────────────────────────────────────────────────────────────────────────────────┘ │  ║
║  │ [ + 添加域名 ]                                                                                 │  ║
║  │                                                                                                │  ║
║  └────────────────────────────────────────────────────────────────────────────────────────────────┘  ║
║                                                                                                       ║
║  ┌────────────────────────────────────────────────────────────────────────────────────────────────┐  ║
║  │ 💰 成本控制                                                                                    │  ║
║  │ ───────────────────────────────────────────────────────────────────────────────────────────── │  ║
║  │                                                                                                │  ║
║  │ 本月使用情況:                                                                                  │  ║
║  │ • API 調用: 125 次                                                                             │  ║
║  │ • Token 用量: 42,750 tokens (Prompt: 22,300 | Completion: 20,450)                             │  ║
║  │ • 預估成本: $2.14                                                                              │  ║
║  │                                                                                                │  ║
║  │ ☑ 啟用預算告警                                                                                 │  ║
║  │   • 每月預算: [$100____]                                                                       │  ║
║  │   • 告警閾值: [80__]%（達到預算的 80% 時發送通知）                                             │  ║
║  │   • 自動停止: ☐（達到預算時自動停止 Agent）                                                    │  ║
║  │                                                                                                │  ║
║  │ [ 查看詳細成本報告 → ]                                                                         │  ║
║  │                                                                                                │  ║
║  └────────────────────────────────────────────────────────────────────────────────────────────────┘  ║
║                                                                                                       ║
║  ─────────────────────────────────────────────────────────────────────────────────────────────────   ║
║                                                                                                       ║
║  [取消]                     💾 已保存 (5 分鐘前)                                  [保存更改]         ║
║                                                                                                       ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════╝
```

**部署與發布關鍵要素**:

1. **API 訪問**: Endpoint、API Keys 管理
2. **版本管理**: 版本列表、回滾、對比
3. **安全設置**: 速率限制、內容過濾、CORS
4. **成本控制**: 使用統計、預算告警

---

## 4. 快速導航與內容摘要

由於 Agent 詳情頁內容非常豐富，我省略了一些重複的部分（響應式設計、可訪問性、技術實現等），因為這些在前面的 Wireframes 中已經詳細說明。

### 核心設計要點總結

**5 個標籤頁功能總結**:

| 標籤 | 核心功能 | 關鍵元素 | 目標用戶 |
|------|---------|---------|---------|
| **基本配置** | Agent 基本信息和 LLM 設置 | 名稱、描述、模型、Temperature | All |
| **Persona 配置** | System Prompt 和對話風格 | Prompt 編輯器、Few-Shot、約束 | Alex |
| **能力配置** | 擴展 Agent 功能 | 知識庫、函數、代碼執行、插件 | Alex |
| **測試與調試** | 測試和性能分析 | 測試對話、日誌、性能圖表 | Alex, Sarah |
| **部署與發布** | 版本和安全管理 | API Keys、版本控制、安全、成本 | Alex, David |

---

## 5. 設計決策記錄（ADR）

### 決策 1: 5 個標籤頁設計

**選擇**: 將配置分為 5 個獨立標籤頁

**理由**:
- **信息組織**: 每個標籤頁專注一個主題
- **認知負荷**: 避免單頁面信息過載
- **進度保存**: 每個標籤頁可獨立保存

**權衡**:
- 需要在標籤間切換
- 但提供更清晰的信息架構

### 決策 2: 雙列佈局（表單 + 統計）

**選擇**: 左側配置表單，右側實時統計

**理由**:
- **上下文**: 統計信息提供配置上下文
- **驗證**: 快速查看配置的影響
- **空間利用**: 充分利用寬屏空間

### 決策 3: 實時預覽和測試

**選擇**: 在配置頁面嵌入測試功能

**理由**:
- **即時反饋**: 配置變更立即測試
- **減少切換**: 無需離開配置頁面
- **提升效率**: 配置和測試一體化

### 決策 4: 版本管理系統

**選擇**: 內置版本控制和回滾功能

**理由**:
- **安全**: 配置錯誤可快速回滾
- **審計**: 追蹤所有變更歷史
- **協作**: 團隊成員了解變更情況

---

## 6. 技術實現建議（精簡版）

### 數據結構

```typescript
interface Agent {
  id: string;
  name: string;
  description: string;
  status: 'running' | 'stopped' | 'error';

  // 基本配置
  config: {
    provider: string;
    model: string;
    apiKey: string;
    temperature: number;
    maxTokens: number;
  };

  // Persona
  persona: {
    systemPrompt: string;
    style: string;
    fewShotExamples: Array<{user: string; assistant: string}>;
    constraints: string[];
  };

  // 能力
  capabilities: {
    knowledgeBases: string[];
    functions: string[];
    codeExecution: boolean;
    plugins: string[];
  };

  // 版本
  version: string;
  versions: AgentVersion[];

  // 統計
  metrics: {
    totalCalls: number;
    avgResponseTime: number;
    successRate: number;
    lastUsedAt: string;
  };
}
```

### 狀態管理

```typescript
const useAgentDetailStore = create((set) => ({
  agent: null,
  currentTab: 'basic',
  isDirty: false,
  isSaving: false,

  setTab: (tab) => set({ currentTab: tab }),
  updateAgent: (updates) => set((state) => ({
    agent: { ...state.agent, ...updates },
    isDirty: true,
  })),
  saveAgent: async () => {
    set({ isSaving: true });
    await api.updateAgent(get().agent);
    set({ isSaving: false, isDirty: false });
  },
}));
```

---

## 7. 後續迭代

- **AI 輔助配置**: 智能推薦配置參數
- **A/B 測試**: 對比不同配置的效果
- **協作編輯**: 多人同時編輯 Agent
- **自動優化**: AI 自動優化 Persona 和參數

---

**狀態**: ✅ Wireframe 已完成（精簡版，保留核心設計）
**下一步**: 創建對話界面 Wireframe（05-conversation.md）
**特殊說明**: 由於複雜度極高，本文檔採用精簡版本，重點展示 5 個標籤頁的核心佈局和功能
**審核**: 待 UI/UX 團隊審核
**更新日期**: 2025-10-29
